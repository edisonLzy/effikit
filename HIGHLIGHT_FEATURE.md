# EffiKit 高亮功能说明

## 功能概述

EffiKit 的高亮功能允许用户在任何网页上选择文本并添加彩色高亮标记，支持多种颜色选择和统一管理。

## 主要特性

### 1. 文本高亮
- **选择文本**：在任何网页上选择文本
- **颜色选择**：支持 6 种高亮颜色（黄色、红色、蓝色、绿色、紫色、橙色）
- **即时显示**：选择颜色后立即在页面上显示高亮效果
- **持久保存**：高亮内容自动保存，刷新页面后依然显示

### 2. 高亮管理
- **统一管理**：在侧边栏中查看所有高亮内容
- **按页面分组**：高亮内容按网站 URL 分组显示
- **批量操作**：支持删除单个高亮或清空整个页面的高亮
- **快速跳转**：点击可直接跳转到对应页面

### 3. 功能开关
- **Chrome 状态栏**：点击扩展图标可切换高亮功能的启用/禁用状态
- **图标状态**：图标会根据当前页面是否有高亮内容显示不同状态
- **实时同步**：开关状态在所有标签页间实时同步

## 使用方法

### 创建高亮
1. 在网页上选择要高亮的文本
2. 弹出的颜色选择器中点击想要的颜色
3. 文本立即被高亮显示

### 管理高亮
1. 点击扩展图标打开侧边栏
2. 选择"高亮管理"工具
3. 查看、复制或删除已有的高亮内容

### 开关控制
1. 点击 Chrome 状态栏中的扩展图标
2. 功能在启用/禁用间切换
3. 禁用时不会响应文本选择，已有高亮也会隐藏

## 技术实现

### 核心架构
- **highlighter/ 目录**：包含所有高亮相关的核心逻辑
- **content-script.ts**：处理页面交互和 UI 注入
- **background.ts**：管理扩展状态和标签页通信
- **sidebar 工具**：提供高亮管理界面

### 存储机制
- 使用 `chrome.storage.local` 存储高亮数据
- 按 URL 分组存储，支持跨页面访问
- 包含文本内容、颜色、时间戳和位置信息

### 样式系统
- 使用 CSS 类控制高亮样式
- 支持 hover 效果和过渡动画
- 与页面样式隔离，避免冲突

## 文件结构

```
highlighter/
├── index.ts          # 入口文件，导出所有 API
├── types.ts          # 类型定义
├── utils.ts          # 工具函数
├── storage.ts        # 存储相关功能
├── dom.ts            # DOM 操作功能
└── manager.ts        # 高亮管理器

components/ui/
└── HighlightPopover.tsx  # 颜色选择弹窗

sidebar/tools/HighlightsManager/
├── index.tsx         # 管理界面主组件
└── useHighlights.ts  # React Hook
```

## 注意事项

1. **权限要求**：需要 `storage` 和 `activeTab` 权限
2. **兼容性**：支持所有现代浏览器，基于 Manifest V3
3. **性能**：高亮数据本地存储，不影响页面加载速度
4. **隐私**：所有数据仅存储在本地，不会上传到服务器

## 后续扩展

- [ ] 支持高亮内容导出（Markdown、PDF 等）
- [ ] 添加高亮分类和标签功能
- [ ] 支持高亮内容搜索和筛选
- [ ] 添加高亮内容的注释功能
- [ ] 支持团队协作和高亮内容同步 